@using Workshop4.Presentation.Services
@namespace Workshop4.Presentation.Components.NodeActions
@implements IObserver<bool>

<MudButton
    Color="Color.Error"
    Variant="Variant.Filled"
    StartIcon="@Icons.Material.Filled.Remove"
    OnClick="@OnRemoveNodeClicked"
    Disabled="_isDisabled">

    Delete

</MudButton>

@code {

    private bool _isDisabled;

    [Parameter]
    [EditorRequired]
    public EventCallback OnRemoveNodeClicked { get; set; }

    protected override void OnInitialized()
    {
        AppState.Instance.IsExecutingChanged.Subscribe(this);
    }

    public void OnCompleted() { }
    public void OnError(Exception error) { }

    public void OnNext(bool value)
    {
        _isDisabled = value;
        StateHasChanged();
    }

}